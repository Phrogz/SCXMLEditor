<!DOCTYPE html>
<html><head>
	<meta charset="utf-8">
	<title>SCXML Editor</title>
	<style type="text/css" media="all">
		html,body {
			margin:0; padding:0;
			webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none;
      height: 100%
		}
		svg { display:block }
		#shadows rect {
			opacity:0.3;
			filter:url(#stateshadow);
		}
		.state rect {
			fill:hsl(0,0%,100%); fill-opacity:0.8;
			stroke:hsl(0,0%,60%); stroke-width:2px; stroke-opacity:0.6;
			cursor:move;
		}
		.selected.state rect {
			fill:yellow; stroke-width:3px; stroke:black; stroke-opacity:0.8;
		}
		.selected text {
			font-weight:800;
		}
		.containmentError.state rect { stroke:red }
		#states .final   text   { fill:hsl(0,50%,30%); font-style:italic; }
		#states .initial text   { fill:hsl(120,50%,30%) }
		svg text { font:13px Calibri; text-anchor:middle; dominant-baseline:central; pointer-events:none; }
		path.transition {
			stroke:#000; stroke-opacity:0.2; stroke-width:2px;
			fill:none; filter:url(#whitestroke);

			cursor:pointer;
		}
		.selected path.transition {
			stroke:#000; stroke-opacity:0.8; stroke-width:2px;
			filter:url(#glow);
		}
		#heads path.transition { stroke:none; marker-start:url(#source); marker-end:url(#target); filter:none; }
		label {position:absolute; top:0.5em; right:0.5em}
		input {width:20em;}
	</style>
</head><body>
<svg xmlns="http://www.w3.org/2000/svg" xviewBox="100 100 300 300" width="100%" height="100%">
	<defs>
    <marker id='source' markerWidth='4' markerHeight='4' refX='2' refY='2'>
      <circle cx="2" cy="2" r="2" />
    </marker>
    <marker id='target' orient='auto' markerWidth='5' markerHeight='5' refX='2' refY='2.5'>
      <polygon points='0,0 0,5 5,2.5' />
    </marker>
		<filter id="stateshadow" height="130%">
		  <feGaussianBlur in="SourceAlpha" stdDeviation="4"/>
		  <feOffset dx="4" dy="3" result="offsetblur"/>
			<feComponentTransfer><feFuncA type="linear" slope="0.9"/></feComponentTransfer>
 		  <!-- <feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge> -->
		</filter>
		<filter id="glow">
			<feColorMatrix type="matrix" values="0 0 0 1 0 0 0 0 1 0 0 0 0 0 0 0 0 0 1 0"/>
			<feGaussianBlur stdDeviation="2.5"/>
			<feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>
		</filter>
		<filter id="whitestroke">
			<feColorMatrix type="matrix" in="SourceAlpha" values="0 0 0 0 1 0 0 0 0 1 0 0 0 0 1 0 0 0 4 0"/>
			<feMorphology operator="dilate" radius="2.5" />
			<feMerge><feMergeNode /><feMergeNode in="SourceGraphic"/></feMerge>
		</filter>
	</defs>
</svg>

<script type="module">
'use strict';

import { loadFromURL as loadSCXML } from './scxmldom.js';
import SCXMLEditor                  from './scxmleditor.js';

let $ed, $doc;
loadSCXML('http://localhost:5000/test/launcher.scxml', doc => {
	$ed = new SCXMLEditor(document.querySelector('svg'), $doc=doc);
	window.$doc = $doc;
	window.$ed  = $ed;
});
</script>

</body></html>